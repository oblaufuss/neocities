<!DOCTYPE html>
<html>
<head>
	<title></title> 
</head>
<body>
	<a href="https://github.com/cwilso/WebMIDIAPIShim">Webmidi</a>
	<a href="https://www.npmjs.com/package/midi-writer-js">midiwriter</a>
	<img src="helloworld.png" id= "target" style="image-rendering: pixelated;">
	<p id="test1">Test text 1</p>
	<p id="test2">Test text 2</p>
	<script src="huetune.js">
	</script>

	<script src="https://unpkg.com/unmute" data-add-button="true"></script>
<div id="content">
    <div class="button" data-key="q" data-sound="https://dl.dropboxusercontent.com/s/h9sow482vkw06xe/dinky-kick.mp3"></div>
    <div class="button" data-key="w" data-sound="https://dl.dropboxusercontent.com/s/kkikcupdg9n1qiy/dinky-snare.mp3"></div>
    <div class="button" data-key="e" data-sound="https://dl.dropboxusercontent.com/s/d7jlxp5v4z0n62q/dinky-hat-2.mp3"></div>
    <div class="button" data-key="r" data-sound="https://dl.dropboxusercontent.com/s/rblgnob6tvriudy/dinky-cym.mp3"></div>
    <div class="button" data-key="t" data-sound="https://dl.dropboxusercontent.com/s/umm8cmrmn8n4a46/dinky-cym-noise.mp3"></div>
</div>
<div id="device_info">
    <div id="key_data"></div>
</div>

	<button class="button" onclick="aNote.play();">Play...</button>
	<button class="button" onclick="noteOff(60, 200)">Stop</button>

	<script type="text">
		function noteOn(midiNote, velocity){
			player(midiNote, velocity);
		}
		function noteOff(midiNote, velocity){
			player(midiNote, velocity);
		}

//https://www.keithmcmillen.com/blog/making-music-in-the-browser-web-midi-api/

var log = console.log.bind(console),
    keyData = document.getElementById('key_data'),
    midi;
var AudioContext;
var context;
var btnBox = document.getElementById('content'),
    btn = document.getElementsByClassName('button');
var data, cmd, channel, type, note, velocity;
// this maps the MIDI key value (60 - 64) to our samples
var sampleMap = {
    key60: 1,
    key61: 2,
    key62: 3,
    key63: 4,
    key64: 5
};

		function player(note, velocity) {
    var sample = sampleMap['key' + note];
    if (sample) {
        if (type == (0x80 & 0xf0) || velocity == 0) { //QuNexus always returns 144
            btn[sample - 1].classList.remove('active');
            return;
        }
        btn[sample - 1].classList.add('active');
        btn[sample - 1].play(velocity);
    }
}
	</script>

</body>
</html>